\documentclass[11pt]{article}

\input{../questions/macros}

\newcommand{\mytitle}{Neron Models}
\newcommand{\myauthor}{Travis Scholl}
\newcommand{\myemail}{tscholl2@uw.edu}

\newcommand{\neron}{N\'{e}ron }
\newcommand{\etale}{\'{e}tale }

\begin{document}
\title{\mytitle}
\author{\sc \myauthor }
\date{August 18, 2015}
\maketitle

\begin{abstract}
	Notes on \neron models to supplement \cite{milneAV}, \cite{bosch2012neron}, and \cite{silverman1994advanced}.
\end{abstract}

\section{Motivation}

\neron models are important\footnote{\neron Models are used for many things. See {\url{http://www.mathematik.uni-mainz.de/Members/peykar/outline-neron}}.}. We will use them to answer the following questions.

\begin{quest}
	What can you say about $n$ torsion between two isogenous abelian varieties?
\end{quest}
\begin{quest}
	What is a reduction?
\end{quest}

\section{Models}

We start by defining models. For this we need Dedekind schemes.

\begin{defn}
	A \emph{Dedekind scheme} $S$ is a noetherian, normal scheme of dimension $0$ (this makes Dedekind schemes closed under localization) or $1$.
\end{defn}

\begin{defn}
	Let $S$ be a Dedekind scheme with function field $K$ (if $S$ is not connected we take $K = \bigoplus \O_{S,\nu}$, which is finite by the noetherian hypothesis, where the sum is over all the generic points $\nu$ of the irreducible components of $S$). Let $X_K$ be a $K$-scheme. An \emph{$S$-model} for $X_K$ is any $S$-scheme $Y$ such that $Y_K \cong X_K$.
\end{defn}

\begin{excer}
	Show $X_K$ is an $S$-model for itself.
\end{excer}

We note that there may be many choices for an $S$-model.

\begin{ex}
	Let $Y$ be any $S$-model for $X_K$. Then removing or blowing up any point of $Y$ not in the generic fiber over $S$ is again an $S$-model for $X_K$.
\end{ex}

\begin{ex}[Chasing Denominators]
	Let $R$ be a valuation ring with fraction field $K$ and suppose we have a finite type projective or affine $K$-scheme $X_K$. The method of \emph{chasing denominators} (see \cite[Ch.~1.1]{bosch2012neron}) gives us a way of constructing an $R$-scheme $X$ such that the generic fiber of $X$ gives us back $X_K$. Concretely, this means scaling all the defining equations appropriately so they are defined over $R$.
\end{ex}

The point of \neron models is to give a canonical choice of a ``nice'' model with many important properties. For example, if we start with a group variety we would like the model to have a compatible group structure.

\section{Incompatible Properties}

\subsection{Smooth and Proper}

It is hard for a model to be both proper and smooth. The intuition is that proper means ``large enough'' to not be missing any points but smooth means ``small enough'' to avoid any singularities.

\begin{ex}[See {\cite[Ex.~IV.2.6.3]{silverman1994advanced}}]
	Let $X$ be a closed subscheme of $\PP^2_\QQ$ cut out by the equation
	$$
		y^2 = x^3 + 2x^2 + 6
	$$
	Note $X$ is a smooth (via the Jacobi criterion) projective (as a closed subscheme of $\PP^2_\QQ$ hence also proper) curve over $\QQ$.
	
	The same equation gives us a model over $\ZZ$. This model is proper because it is a closed subscheme of $\PP^2_\ZZ$, but not smooth because it has singular fibers at $2,3$, and $97$ (using the Jacobian criterion and the discriminant of Weierstrass equations). In fact the fibers over $3$ and $97$ aren't even reduced. However it's not all bad because $X$ is still regular.
	
	For example the fiber $X_2$ over the point $(2)$ is the cuspidal cubic $y^2 = x^3$ over $\FF_2$ which has a singularity at $x=y=0$. Choosing an appropiate affine neighborhood in $\PP^2_\ZZ$, this point corresponds to the ideal $(2,x,y)$ in $\QQ[x,y]_/y^2=x^3+2x^2+6$. As $X$ is $2$ dimensional and this is a closed point and the maximal ideal must be generated by at least two elements (since the tangent space is at least $2$ dimensional). But we don't need $2$ as a generator because after localizing we have
	$$
	2 = 3^{-1}(y^2 - x^3 - 2x^2).
	$$
	Hence $2$ is contained in the ideal generated by $(x,y)$ so $X$ is regular at this point. In the fiber $2=0$ but $x$ and $y$ stay independent so the dimension stays two, which makes it non-regular.
\end{ex}

\begin{ex}
	Note that there were only finitely many singularities (non-regular points) in the bad fibers in the previous example. Let $X^0$ be $X$ without these points. Then $X^0$ is a smooth model for $X_K$ but is no longer proper over $\ZZ$.
	
	Indeed, if $X^0 \to \ZZ$ was proper then because $X \to \ZZ$ is separated, the cancellation theorem would imply $X^0 \to X$ was proper. But this is an open immersion and proper morphisms are closed. Since $X$ is connected this contradicts $X^0 \neq X$.
\end{ex}

\subsection{Point Extension and Group Structure}

Let $R$ be a valuation ring and $K$ its field of fractions. Suppose $X_K$ is an projective variety over $K$. We can use the method of chasing denominators to write down an $R$-model $X$ using the same defining equations.

Note that every $K$ point over $X_K$ can be thought of a tuple of coordinates in projective $K$ space. By scaling we may assume each coordinate lies in $R$. Hence it is an $R$-point on $X$. This basically shows canonical map $X(R) \to X_K(K)$ is surjective. Note this is very similar to the valuative criterion for properness (see \cite[Thm.~II.4.7]{hartshorne1977algebraic}). In fact a direct consequence of the valuative criterion is that $X(R) \to X_K(K)$ is injective if $X$ is separated over $R$ (but $R$ will be projective which implies proper and hence separated).

Suppose $A_K$ is an abelian variety over $K$. The group structure on $A_K$ is given by a multiplication morphism $A_K\times_K A_K \to A_K$ and an inversion morphism $A_K \to A_K$. Bharath showed us abelian varities are projective, so we can clear denominators to construct an $R$-model $A$ for $A_K$. Here we will assume $R$ is some DVR with fraction field $K$.

The morphisms defining the group structure on $A_K$ induce a rational maps on $A$. However these do not in general extend to a regular maps so $A$ may not have a compatible group structure.

If we localize $A$ to the open $A^0$ where these maps are defined, then we do get an induced group structure on $A^0$ (this is something to show with diagrams). However, we then lose the extension property because the map $A(R) \to A_K(K)$ will fail to be surjective. This is similar to the previous section where we saw localizing the model loses properness.

\section{Definitions}

\begin{defn}[See {\cite[Def.~1.1.1]{bosch2012neron}}]\label{extensionpropetalepoints}
	Let $X$ be a scheme over a Dedekind scheme $S$. Then $X$ satisfies the \emph{extension property for \etale points} at a closed point $s\in S$ if for each \etale local $\O_{S,s}-$algebra $R'$ with field of fractions $K'$, the canonical map
	$$
		X(R') \to X_K(K')
	$$
	is surjective.
\end{defn}

The following lemma shows this is a special case of the valuative criterion with the main difference is \autoref{extensionpropetalepoints} only requires \etale extensions over $\O_{S,s}$ instead of all valuation rings.

\begin{lem}\label{etaledvr}
	A noetherian \etale local extension of a DVR is again a DVR.
\end{lem}
\begin{proof}
	Let $R$ be a DVR and $R'$ be a local \etale $R$-algebra. Recall an \etale map of local rings is (by definition) flat and unramified.
	
	Since $R'$ is flat over $R$ which is a PID, it follows $R'$ is torsion free. Therefore $R \to R'$ is injective. Moreover, the image of a non-zero element of $R$ is a non-zero divisor of $R'$.
	
	Let $t$ be a uniformizer of $R$. Because $t$ is not a zero divisor in $R'$ we have $t^nR' \supsetneq t^{n+1}R'$ for any $n\geq 1$. This shows $R'$ is not artinian so $\dim R' \geq 1$.
	
	Unramified means that the image of the maximal ideal $m_R$ generates the maximal ideal $m_{R'}$, i.e. $m_{R'} = tR'$. It follows $m_{R'}/m_{R'}^2$ is generated by $t$ so $\dim R' \leq 1$. Together with the previous bound this shows $\dim R' = 1$ and moreover $R'$ is regular. Recall the (very non-trivial) fact that regular local rings are UFDs and therefore normal. Hence $R'$ is a DVR.
	
	You could probably also do this without using such heavy machinery.
\end{proof}

\begin{cor}\label{maponpointsalwaysinjectiveifseparated}
	Suppose $X$ is separated over $S$ and let $R'$ be a local \etale $R$-algebra. Then there is a natural injection
	$$
	X(R') \to X_K(K').
	$$
\end{cor}
\begin{proof}
	This follows from the valuative criterion for separatedness since $R'$ is a DVR.
\end{proof}

\begin{defn}[{See \cite[Def.~1.2.1]{bosch2012neron}}]
	Let $X_K$ be a smooth separated $K$-scheme of finite type and $S$ a Dedekind scheme with function field $K$.
	
	A \emph{\neron model} of $X_K$ over $S$ is an $S$-model $X$ which is smooth, separated, finite type, and has the following universal property.
	
	For any smooth $S$-scheme $Y$ and $K$-morphism $Y_K \to X_K$ there exists a unique $S$-morphism $Y \to X$ extending $Y_K \to X_K$. In terms of a diagram this looks like
	$$
	\begin{tikzcd}
		\, & X_K \ar{rr}\ar{dd} & & X \ar{dd}
		\\
		Y_K \ar{rr}\ar{dr}\urar & & Y \ar{dr}[swap]{smooth}\urar[dotted]{\exists!}
		\\
		& K \ar{rr} & & S
	\end{tikzcd}
	$$
\end{defn}

Note that this definition is equivalent to defining the \neron model as the scheme which represents the functor on smooth $S$-schemes given by $Y/S \mapsto \Hom_K(Y_K, X_K)$, (see \cite[Rem.~17.2]{milneAV}).

\section{Properties}

In this section we will assume a \neron model $X$ exists.

\begin{prop}
	\neron models are unique up to a unique isomorphism.
\end{prop}
\begin{proof}
	This follows in the usual way from the universal property.
\end{proof}

\begin{prop}
	\neron models are local in the base.
	
	This means $X$ is a \neron model of $X_K$ if and only if for any open $T$ of $S$, $X_{T}$ is a \neron model for $X_K$ over $T$.
\end{prop}
\begin{proof}
	Notice smoothness, finite type, and separated are all local in the base so we only need to check the universal property. This follows from drawing enough diagrams. The only subtle direction is going backwards. To define the map $Y \to X$ as in the definition, we define maps locally on open subsets $Y_T \to X_T$ by hypothesis. Their uniqueness will guarantee gluing compatibility.
\end{proof}

\begin{rem}[Local to Global principle]
	If $X$ is finite type, then instead of considering $X_T$ we can consider $X \times_S \O_{S,s}$ for only the closed points $s\in S$. These are called the \emph{local \neron models}. One can show that if $X$ is a \neron model then so are all of the $X\times_S \O_{S,s}$. Hence a global \neron model implies the existence of all local models. The converse is \emph{not} true in general.
\end{rem}

\begin{prop}
	\neron models satisfy the extension property for \etale points.
\end{prop}
\begin{proof}
	Let $R'$ be an \etale extension of $S$ and $K'$ (we may assume $R'$ is integral). Then the claim follows from applying the universal property to the maps $R'/S$ and $K'/K$.
	
%	Here is a fact from EGA IV, 8.8.2.
%	\begin{claim}
%		Suppose $X,Y$ are $S$-schemes of finite presentation. Then
%		$$
%			\lim \Hom_{U}(X_{U}, Y_{U}) \to \Hom_{\O_{S,s}}(X_{\O_{S,s}},Y_{O_{S,s}})
%		$$
%		is bijective. Here the limit is over all open neighborhoods $U$ of $s\in S$.
%	\end{claim}
\end{proof}

\begin{prop}
	\neron models are stable under \etale base change.
	
	This means if $S' \to S$ is \etale then $X\times_S S'$ is a \neron model for $X_K\times_K K'$.
\end{prop}
\begin{proof}
	Note smoothness, separated, and finite type are all preserved under base change. So it remains to verify the universal property. To do this we draw the following diagram.
	$$
	\begin{tikzcd}
		\, & X_K \ar{rr}\ar{dd} & & X \ar{dd}
		\\
		X_{K'} \ar{rr}\ar{dd}\ar{ur} & & X' \ar{dd}\ar{ur}
		\\
		\, & K \ar{rr} & & S
		\\
		K' \ar{rr}\ar{ur} & & S' \ar{ur}
	\end{tikzcd}
	$$
	The property follows exactly as you would expect. The only subtlety is that in order to use the universal property of $X$, we need that $X' \to S' \to S$ to be smooth. This is where we are using $S' \to S$ is \etale. Actually, requiring $S' \to S$ be smooth and $S'$ be a Dededkind scheme gives us \etale since \etale is smooth of relative dimension $0$.
\end{proof}

\begin{prop}
	\neron models are compatible with group structure.

	This means if $X_K$ is a group scheme and $X$ is a \neron model, then the group structure on $X_K$ extends uniquely to $X$.
\end{prop}
\begin{proof}
	This follows from the universal property of \neron models. For example, the inversion map is defined as follows. Let $\iota_K:X_K \to X_K$ and $\mu_K:X_K\times X_K \to X_K$ be the inversion and multiplication map for $X_K$. Then applying the universal property there exists a unique morphisms $\iota,\mu$ on $X$ and $X\times X$ respectively extending $\iota_K,\mu_K$. One still has to check these satisfy the group axioms, but it's probably straight forward.
\end{proof}

\section{A Non-Example}

Let $S = \ZZ_{(2)}$ and $X = \PP^1_S$. Then $K = \QQ$ and $X_K = \PP^1_K$. It is clear that $X$ is an $S$-model for $X_K$ and moreover, $X$ is smooth, separated, finite type, and even satisfies the point extension property. We want to show $X$ is \emph{not} a \neron model for $X_K$.

Take $Y = X$ and $Y_K \to X_K$ as the identity. Then there are multiple extensions $Y \to X$, namely the identity and also $(x:y) \mapsto (2x:2y)$. Hence $X$ is \emph{not} a \neron model.

\section{An Example}

\begin{prop}\label{asareneronmodel}
	Let $X$ be an \emph{abelian scheme} (proper, smooth, group scheme with geometrically connected fibers) over a Dedekind scheme $S$. Then $X$ is a \neron model for $X_K$.
\end{prop}

\begin{lem}[See {\cite[Prop.~2.12]{milneLEC}}]\label{smoothoverregnormred}
	Suppose $X,Y$ are noetherian and $X \to Y$ is smooth and finite type. If $Y$ is regular/normal/reduced then so is $X$.
\end{lem}
\begin{proof}
	One definition of smooth is that it factors locally as $X \to \AA^n_Y \to Y$ where $X \to \AA^n_Y$ is \etale. Since all these properties are local, it is enough to check the claim on stalks.
	\begin{enumerate}[(i)]
		\item Assume $f:X\to Y$ is \etale. This is the case proved in \cite{milneLEC}. The ideas are as follows:
		
		Reduced should follow from the square-zero lifting definition of formally \etale.
		
		Regular should follow from the fact that \etale morphisms preserve dimensions of stalks and tangent spaces (see \cite[4.3.23]{liu2006algebraic}).
		
		Normal follows from a nice description of \etale ring extensions.
		
		\item Assume $f: X = \AA^n_Y \to Y$. In this case everything follows from the fact that if $A$ is regular/normal/reduced then so is $A[x]$ (see for example \url{http://stacks.math.columbia.edu/tag/030A}).
	\end{enumerate}
\end{proof}

\begin{rem}
	From the proof above, specifically that $S \to T$ \etale with $T$ reduced implies $S$ is reduced, one can show if $S \to T$ \etale then $S^{\text{red}} \to T^{\text{red}}$ is \etale, see \url{http://math.stackexchange.com/questions/1077523/etale-morphism-and-reduced-schemes}.
\end{rem}

\begin{proof}[(Sketch of Proof \autoref{asareneronmodel})]
	Let $Y$ be any smooth $S$-scheme with a map $Y_K \to X_K$. Note this extends to a rational map $f:Y \dashrightarrow X$ defined on some open. Fix a closed point $s\in S$ and let $\zeta$ be a generic point of the fiber $Y_s$.
	
	Using the fact that $Y \to S$ is flat one can show $\O_{Y,\zeta} = 1$. By the previous lemma, $Y$ is normal hence $\O_{\zeta,Y}$ is a DVR.
	
	We may assume $Y \to S$ is dominant otherwise the map is trivial as $S$ (consider the topology on $S$ without its generic point). Let $L$ be the function field of $Y$ (note $L = \Frac(\O_{Y,\zeta})$). Dominance gives us a map $\spec L \to \spec K$ which induces a unique map $\spec L \to Y_K$. Following by our map $Y_K \to X_K \to X$ we have a commutative diagram
	$$
	\begin{tikzcd}
		\spec L \rar\dar & X \dar
		\\
		\spec \O_{Y,\zeta} \rar\urar[dotted] & S
	\end{tikzcd}
	$$
	Abelian schemes are proper by definition hence the dotted arrow is the unique lift.
	
	Now a map from the stalk at a point extends to a rational map defined near the point. Hence $Y_K \to X_K$ extends uniquely to a rational map around every codimension $1$ point. So if $U$ is the maximal open where $f$ is defined, then $Y \setminus U$ has codimension at least $2$. Recall Manar proved earlier a theorem about extending rational maps from a smooth variety to a group variety. It turns out there is a similar extension theorem for this setting (smooth scheme into a group scheme over a normal noetherian base, see \cite[Thm.~4.4/1]{bosch2012neron}).
\end{proof}

We can reverse the proof of \autoref{asareneronmodel} to actually get a criterion for being a \neron model of the generic fiber.

\begin{prop}
	Let $X$ be a smooth separated $S$-group scheme of finite type. Then $X$ is a \neron model of its generic fiber if and only if $X$ satisfies the extension property for \etale points.
\end{prop}
\begin{proof}
	See \cite[Crit.~1.2/9]{bosch2012neron} for a sketch.
\end{proof}

\section{Existence}

\begin{thm}[See {\cite[Thm.~1.4/3]{bosch2012neron}}]\label{neronmodelsforav}
	Let $S$ be a connected Dedekind scheme with function field $K$ and let $A_K$ be an abelian variety over $K$. Then the \neron model of $A_K$ exists.
\end{thm}
\begin{proof}[Not even a sketch]
	The proof of existence is broken up into two steps: first prove \neron models exist locally (when $S$ is a DVR) and then glue these together to build a global model. This is described in \cite[Sec.~1.3,1.4]{bosch2012neron}. It turns out the abelian variety structure of $A_K$ is needed to glue together the local models.
\end{proof}

A proof specific to elliptic curves can be found in \cite[Thm.~IV.6.1]{silverman1994advanced}. This is more hands on, so it shows one can in practice actually ``write down'' a \neron model.

\begin{thm}[See {\cite[Thm.~IV.5.3,IV.6.3]{silverman1994advanced}}]\label{weirstrassneronmodel}
	Let $K$ be a field and $E/K$ an elliptic curve. Let $\nu$ be a discrete valuation on $K$ and $R$ the corresponding DVR. Fix a minimal Weirstrass equation for $E$. This means a Weirstrass equation which minimizes the valuation of the discriminant with the condition that all the coefficients live in $R$.

	Let $\W$ represent the closed subscheme of $\PP^2_R$ given by the same Weirstrass equation as $E$ and $\W^0$ the smooth locus of $\W/R$. Then
	\begin{enumerate}[(i)]
		\item $\W_K = \W^0_K = E/K$
		\item $\W(R) \overset{\cong}{\to} E(K)$ and if $\W$ is regular then $\W^0(R) \overset{\cong}{\to} \W^0(K)$
		\item The group structure on $E/K$ extends to a group structure on $\W^0/R$.
		\item If $E$ has good reduction (i.e. $\W^0 = \W$) then $\W$ is a \neron model for $E$.
	\end{enumerate}
\end{thm}
\begin{proof}
	\hfill
	\begin{enumerate}[(i)]
		\item $\W_K = E$ because they have the same defining equation. Note every point in the generic fiber of $\W$ is smooth as the fiber is an elliptic curve. Hence $\W^0$ contains the entire generic fiber of $\W$ so $\W^0_K = \W_K$.
		
		\item $\W(R) = E(K)$ follows from the valuative criterion for properness because $\W$ is a closed subscheme of $\PP^2_R$ so in particular it is proper. Now suppose $\W$ is regular. We will show $\W(R) = \W^0(R)$. We will do this by showing the image of any $R$-point in $\W$ lies in the smooth locus. Fix an $R$-point $f:\spec R \to \W$. By (a) the image of $f$ in the generic fiber is smooth so it's enough to check the special fiber. Let $t$ be a uniformizer of $R$ and fix a closed point $x$ in $X_k$ where $k$ is the residue field $R/(t)$. To ease notation set $A = \O_{X,x}$ and $m = m_x$. Note $\dim A = 2$.
		
		The stalk at $x$ in the fiber is $A/tA$. Since $t\in m$ (because $R \to A$ is a local ring homomorphism) the dimension of the tangent space of the fiber is $\dim_{A/m} m/tm^2$. By hypothesis, $A$ is regular so $\dim_{A/m} m/m^2 = 2$. Thus $x$ is regular in the fiber if and only if $t\notin m^2$. But $R \to A \to R$ is the identity and these are maps of local rings, so $t\in m^2$ would imply $t\in (t)^2$ which is a contradiction.
		
		\item This can be proven by writing down the formula for the group structure of $E$ on different affine components of $\W\times\W$ and $\W$. Once the formula is written down, it's not hard to see where it is defined. For example if $\Char k \notin\{2,3\}$, we can use a change of coordinates to put the Weirstrass equation into the form $y^2 = x^3 + ax + b$. In the usual affine patch $\W'$ the group law $\W'\times\W' \to \W\subseteq\PP^2_R$ may look like (see \cite[III.2.3]{silverman2009arithmetic})
		\begin{align*}
			(x_1,y_1)\times(x_2,y_2) \mapsto
			\bigg[
			&(x_2-x_1)\left((y_2-y_1)^2 - (x_2 - x_1)^2(x_2+x_1)\right),
			\\
			&(y_2-y_1)^3 + (x_2-x_1)^2(x_1y_1-x_2y_2+2x_2y_1-2x_1y_2),
			\\
			&(x_2-x_1)^3\bigg]
		\end{align*}
		This is well defined everywhere except possibly the diagonal. To deal with the diagonal you can rewrite the group law using $y^2 = x^3 + ax + b$. This works everywhere except for when $y_1+y_2=x_1^2+x_1x_2+x_2^2+a=0$. Continuing this pattern shows the map extends everywhere except possibly the unique singular point on the special fiber. The inversion map follows similar and the fact that they satisfy all the axioms follows from the fact that they define a group law on the generic fiber.
		
		\item This follows from \autoref{asareneronmodel}.
	\end{enumerate}
\end{proof}

\begin{rem}
	There is another model often associated to Elliptic curves. This is the regular proper minimal model, i.e. a model $\W$ which is a regular scheme, flat and proper over $R$, and given any other such model $\W'$ such that $\W \to \W'$ is an isomorphism on the generic fiber, then $\W\to\W'$ is an isomorphism over $R$. These models also exist and are unique (see \cite[Ch.~1.5]{bosch2012neron}) for references.
\end{rem}
\begin{thm}[See {\cite[Thm.~IV.6.1]{silverman1994advanced}}]
	The smooth locus of a minimal proper regular model is a \neron model.
\end{thm}

\section{Reductions}

\neron models also tell us something about the reduction of a variety. In the case of elliptic curves, Tate's algorithm gives a process by which to deduce the special fiber of a minimal proper regular model for $E/K$, see \cite[Table.~IV.4.1,~Pg.~365]{silverman1994advanced}. One important corollary to this classification is the following.

\begin{cor}[See {\cite[Cor.~IV.9.2]{silverman1994advanced}}]
	Let $E/K$ be an elliptic curve and choose a minimal Weierstrass equation. Set $E_0(K)$ to be all points of $E(K)$ which reduce to a non-singular point. Then $E(K)/E_0(K)$ is finite.
\end{cor}

This is one of the main ingrediants in the Criterion of \neron-Ogg-Shafarevich. Assume the residue field is perfect (for example think of the case $K = \QQ_p$ and $k = \FF_p$).

\begin{thm}[Criterion of \neron-Ogg-Shafarevich, see {\cite[Thm.~VII.7.1]{silverman2009arithmetic}}]\label{criterionofNOS}
	Let $E/K$ be an elliptic curve over a local field with non-archimedean valuation $\nu$. Then TFAE
	\begin{enumerate}[(a)]
		\item $E$ has good reduction at $\nu$, i.e. the curve given by a minimal Weirstrass equation in the residue field is non-singular and hence defines an elliptic curve.
		\item $E[m]$ is unramified at $\nu$ for infinitely many (all) $m\geq 1$ prime to $p = \Char k$.
		\item The Tate module $T_\ell(E)$ is unramified at $\nu$ for some (all) primes $\ell \neq \Char k$.
	\end{enumerate}
\end{thm}
\begin{proof}
	See proof of \autoref{NOScriterionforav}.
\end{proof}

\begin{rem}\label{somevsallremark}
	The ``(all)'' in the statements should be read as a separate statement with ``all'' replacing the other quantifier. If ordered in the correct way, the only hard implications should be $(a) \Rightarrow (b)$ (with all used) and $(b)\Rightarrow(a)$ (with infinitely many used). Recall $T_\ell(E)$ is unramified if and only if $E[\ell^n]$ is unramified for all $n\geq 1$.
\end{rem}

To understand what the theorem is saying we need to define an unramified Galois module. We will keep the same assumptions as above.

\begin{defn}
	Keeping the same notation as in \autoref{criterionofNOS}, let $G = \gal(K^{s}/K)$ where $K^s$ is the separable closure of $K$. Recall the definitions of the decomposition and inertia subgroups. First let $\omega$ be an extension of $\nu$ to $K^s$ (this is unique with our assumption $K$ is local, however we could let $K$ be a global field and fix an extension $\omega$ and get the same thing). See \cite[Ch.~2.9]{neukirch2013algebraic} and \cite[Sec.~1]{serre1968good}.
	
	The \emph{decomposition} subgroup $D_\omega$ is all $\sigma\in G$ such that $\omega\circ\sigma = \omega$. Equivalently, $D_\omega$ are the automorphisms of $K^s$ which are continuous with respect to $\omega$. There is an induced map $D \to \gal(\overline{k}/k)$ and the \emph{inertia} subgroup is the kernel. A standard fact They form an exact sequence
	$$
	1 \to I_\omega \to D_\omega \to \gal(\overline{k}/k) \to 1
	$$
	
	Let $X$ be a $G$-set. Then $X$ is \emph{unramified} with respect to $\nu$ if $I_\omega$ acts trivially on it. Note this makes sense because it is independent of $\omega$. This is because any two extensions are conjugate, i.e. if we had chosen $\omega'$ then there exists $\sigma\in G$ with $\omega' = \omega\circ\sigma$. It follows that $I_\omega$ acts trivially on $X$ if and only if $I_{\omega'}$ does as well.
\end{defn}

\section{Extension to Abelian Varieties}

The criterion in \autoref{criterionofNOS} can be extended to abelian varities as done in \cite{serre1968good}. In this case instead of using minimal regular proper models, we use \neron models.

Since we no longer have Weierstrass equations, we also have to define what ``good reduction'' means. We keep the same conditions on $K$ as in the previous section.
\begin{defn}
	Let $A$ be an abelian variety over $K$. We say $A$ has \emph{good reduction} at $\nu$ if there exists an abelian scheme $\A$ over $S = \spec\O_K$ such that $\A_K = \A\times_S \spec K \cong A_K$. Here $\O_K$ is the valuation ring corresponding to $\nu$.
\end{defn}

\begin{rem}\label{altgoodreduction}
	Recall \autoref{asareneronmodel} implies that such an $A_\nu$ is automatically a \neron model and from \autoref{neronmodelsforav} we know \neron models for abelian varieties exist. So an alternative definition for ``good reduction'' could be ``the \neron model is an abelian scheme''. Since \neron models are already smooth and a group scheme, this is just requiring proper and connected fibers.
\end{rem}

The generalization of \autoref{criterionofNOS} is exactly what you would expect.

\begin{thm}[See {\cite[Thm.~1]{serre1968good}}]\label{NOScriterionforav}
	Keeping the same assumptions/notation as above, TFAE
	\begin{enumerate}[(a)]
		\item $A$ has good reduction at $\nu$.
		\item $A_m = \Hom(\ZZ/m\ZZ,A(K^s))$ is unramified at $\nu$ for infinitely many (all) $m$ primes to $\Char k$.
		\item $T_\ell(A)$ is unramified at $\nu$ for some (all) primes $\ell\neq\Char k$.
	\end{enumerate}
\end{thm}
\begin{proof}[Sketch of Proof]
	For details, see {\cite[Thm.~VII.7.1]{silverman2009arithmetic}} for the case of Elliptic curves and {\cite[Thm.~1]{serre1968good}} for abelian varieties. The proofs in either case are similar except for the end.

	Similar to \autoref{somevsallremark}, the ``(all)'' parts should be read as separate statements. Let $(b'),(c')$ be the corresponding statements with ``all'' used. Also $T_\ell(A)$ is unramified if and only if $A_{\ell^n}$ is unramified for all $n\geq 1$. This immediately gives
	$$
		(b') \Rightarrow (c')\Rightarrow (c) \Rightarrow (b).
	$$
	This leaves two implications left. Let $\A/\spec\O_K$ be the \neron model for $A$ and let $\widetilde{A} = \A\times_S k$ be the special fiber.
	
	Let $L$ be the fixed field $(K^s)^I$. This is sometimes called the inertia subfield. It is also the maximal unramified extension of $K$ (see \cite[Ch.~2.8,9]{neukirch2013algebraic} for more on this). This means it's the smallest subfield such that the residue field is $k^s$, which is $\overline{k}$ in our case. Notice it is a union of \etale extensions and hence by the \neron mapping property
	$$
		A(L) \cong \A(\O_L).
	$$
	Recall the natural map
	$$
		\A(\O_{L}) \to \widetilde{A}(\overline{k}).
	$$
	Hensels' Lemma (recall local fields are complete) gives surjectivity. Fixing $m$ prime to $\Char k$ and counting shows they have the same size $m$-torsion ($2\dim A(L) = 2\dim \widetilde{A}(\overline{k})$) so the reduction map induces an isomorphism
	$$
		\A(\O_L)[m] \to \widetilde{A}(\overline{k})[m]
	$$
	which also commutes the action of the decomposition subgroup. 
	\begin{description}
		\item[$(a) \Rightarrow (b'):$]
			The definition of abelian scheme implies that $\widetilde{A}$ is an abelian variety over $k$ of the same dimension as $\A$.
			
			Lucas showed us that for $m$ coprime to the characteristic, the $m$ torsion is a free $\ZZ/m\ZZ$ module of rank twice the dimension. Since $\dim A = \dim \tilde{A}$, by above
			$$
			\widetilde{A}(\overline{k})[m] \cong \script{A}(\O_L)[m] \cong A(L)[m] \hookrightarrow A_m
			$$
			But $\widetilde{A}$ and $A$ have the same dimension so this must be an isomorphism of $D$-sets. Since $I$ acts trivially on the left by definition, it also acts trivially on $A_m$.

		\item[$(b) \Rightarrow (a):$]
			
			Let $\widetilde{A}^0$ be the connected component of $\widetilde{A}$. It turns out that $\widetilde{A}$ has a finite number $c$ of connected components. This is analogous to how $E(K)/E^0(K)$ was finite in the Elliptic curve case. In the Elliptic curve case these groups came in an exact sequence. It turns out $\widetilde{A}^0$ is an extension of some abelian varities $B$ and another group scheme $U\times S$ where $U$ is a unitary group and $S$ is a torus. We don't need to know much about these except $\dim U\times S = \dim U + \dim S$ and $(U\times S)_m$ is a free $\ZZ/m\ZZ$-module of rank at most $\dim S$.
			
			So if $m$ is coprime to $\Char k$ we get an exact sequence
			$$
				0 \to (U\times S)_m \to \widetilde{A}_m^0 \to B_m \to 0.
			$$
			We also have an exact sequence from the inclusion of the identity component
			$$
				0 \to \widetilde{A}^0_m \to \widetilde{A}_m \to \ast \to 0.
			$$			
			By hypothesis there are inifintely many $m$ coprime to $\Char k$ such that $A_m$ is unramified. Choose one with $m > c$. Note $|\ast|$ divides $c$ but must be a multiple of $m$ so $\ast = 0$. From the second exact sequence we get
			$$
				\rank\widetilde{A}^0_m = \rank\widetilde{A}_m = \rank A(L)[m] = 2\dim A
			$$ using the isomorphism in the previous direction.
			Then computing ranks of the first sequence shows
			$$
				\dim S + 2\dim B \geq 2\dim A.
			$$
			But recall $\widetilde{A}^0$ is an extension of $B$ and $U\times S$ and has the same dimension as $A$ so
			$$
				\dim A = \dim B + \dim U + \dim S.
			$$
			This shows $S = U = 0$ and hence $\widetilde{A}^0 \cong B$ which implies $\widetilde{A}$ is an abelian variety. In particular, we have shown $\widetilde{A}$ is proper!
			
			Finally a corollary to Zariski's connectedness theorem shows $\A$ is proper. But a proper \neron model is an abelian scheme by \autoref{altgoodreduction}.
	\end{description}
\end{proof}

\section{Motivation Again}

Here we list a few corollaries to the criterion of \autoref{NOScriterionforav}.
\begin{cor}
	If $T_\ell(A)$ is unramified for some $\ell$, then it is unramified at all $\ell\neq\Char k$.
\end{cor}
\begin{proof}
	This is the equivalence of $(c)$ and $(c')$ from the proof of \autoref{NOScriterionforav}.
\end{proof}

\begin{cor}
	Suppose $A \to A'$ is a surjective homomorphism of abelian varieties over $K$. If $A$ has good reduction, then $A'$ does.
\end{cor}
\begin{proof}
	The induced map on Tate modules is also a surjection. So if $I$ acts trivially on $T_\ell(A)$ it also acts trivially on $T_\ell(A')$.
\end{proof}

\begin{cor}
	Suppose $A$ and $A'$ are isogeneous. Then $A$ has good reduction at $\nu$ if and only if $A'$ does.
\end{cor}
\begin{proof}
	This follows from the previous corollary using the dual isogeny.
\end{proof}

\begin{cor}
	Let $0 \to A \to B \to C \to 0$ be an exact sequence of abelian varieties. Then $B$ has good reduction at $\nu$ if and only if $A$ and $C$ do.
\end{cor}
\begin{proof}
	It is a general fact that given an exact sequence like this of abelian varieties then $B$ is isogeneous to $A\times C$. This probably follows from what Lucas said about decomposing abelian varieties into simple components.
\end{proof}

\bibliographystyle{alpha}
\bibliography{../questions/references}

\begin{center}
\noindent\rule{4cm}{.5pt}
\vspace{.25cm}

\noindent {\sc \small \myauthor}\\
{\small Department of Mathematics, University of Washington, Seattle WA 98195} \\
email: {\tt \myemail}
\end{center}

\end{document}
